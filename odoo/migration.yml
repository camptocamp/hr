migration:
  options:
    install_command: odoo
  versions:
    - version: 10.0.0
      operations:
        pre:
          - anthem songs.install.pre::main
        post:
          - anthem songs.install.company::main
          - anthem songs.install.csv_import::main
          - anthem songs.install.accounting::main
          - anthem songs.install.crm::main
          - anthem songs.install.email::main
          - anthem songs.install.hr::main
          - anthem songs.install.jira::main
          - anthem songs.install.ldap::main
          - anthem songs.install.products::main
          - anthem songs.install.sale::main
          - anthem songs.install.logistics::main
          # - anthem songs.install.data_all::main
          # Specific case for cloud platform: on our platform, AWS_ACCESS_KEY_ID will be defined
          # so we know we have to install and configure the platform addons.
          # Won't be done on the image delivered to BSO.
          - bash -c '[ -z "$AWS_ACCESS_KEY_ID" ] && exit 0 || gosu odoo odoo --stop-after-init --workers=0 --log-level=warn -i cloud_platform'
          - bash -c '[ -z "$AWS_ACCESS_KEY_ID" ] && exit 0 || anthem odoo.addons.cloud_platform.songs::install_exoscale'
      modes:
        full:
          operations:
            post:
              - anthem songs.install.data_full::main
        demo:
          operations:
            post:
              - anthem songs.install.data_demo::main
      addons:
        upgrade:
          #### core
          - account
          - analytic
          - auth_ldap
          - crm
          - document
          - hr
          - hr_expense
          - hr_holidays
          - hr_recruitment
          - hr_timesheet_sheet
          - inter_company_rules
          - l10n_fr
          - l10n_lu
          - l10n_uk
          - l10n_us
          - marketing_campain
          - purchase
          - sale_contract
          - sale_timesheet
          - stock
          - website_contract
          - website_quote
          #### OCA
          # server-tools
          - base_technical_features
          - mail_environment
          - users_ldap_populate
          - connector
          - connector_jira
          - queue_job
          - server_env_connector_jira
          # hr
          - hr_family
          - hr_timesheet_attendance
          - hr_holidays_compute_days
          - hr_holidays_imposed_days
          - hr_holidays_legal_leave
          - hr_employee_firstname
          # partner-contact
          - partner_address_street3
          - partner_multi_relation
          - partner_firstname
          # sale-workflow
          - sale_double_validation
          - server_environment_files
          - specific_fct
          - specific_security
          - specific_crm
          - specific_hr
          - specific_product
          - specific_sale

# Todo, debug and reactivate the songs with 'TODO' flag
    - version: 10.1.0
    - version: 10.1.1
    - version: 10.1.2
    - version: 10.1.3
      addons:
        upgrade:
          - specific_crm
          - project_timesheet_currency
          - sale_line_cost_control
      operations:
        post:
          - anthem songs.upgrade.upgrade_10_1_4::main
    - version: 10.1.4
      addons:
        upgrade:
          - specific_security
      operations:
        post:
          - anthem songs.install.email::replace_partner_email
          - anthem songs.install.email::replace_employee_email
    - version: 10.1.5
      addons:
        upgrade:
          - specific_security
    - version: 10.1.6
      addons:
        upgrade:
          - dj_compilation_account
          - dj_compilation_stock
          - web_environment_ribbon
          - server_environment_ir_config_parameter
    - version: 10.1.7
    - version: 10.2.0
      addons:
        upgrade:
          - specific_product
          - specific_sale
          - expensify
          - bso_base
          - bso_purchase
          - expensify
          - specific_security
          - invoice_timesheet_report
          - specific_hr
    - version: 10.2.1
      addons:
        upgrade:
          - specific_expense
    - version: 10.2.2
      operations:
        post:
          - anthem songs.install.printer::main
          - anthem songs.upgrade.upgrade_10_2_2::main
      addons:
        upgrade:
          - specific_sale
          - date_range
          - account_financial_report_qweb
          - leaves_constraints
          - specific_expense
          - bso_webservice
          - account_invoice_merge
          - base_report_to_printer
    - version: 10.2.3
      addons:
        upgrade:
          - expense_tax
          - account_tag_category
          - expensify
          - sale_purchase_sourcing
    - version: 10.2.4
      addons:
        upgrade:
          - expensify
          - specific_hr
