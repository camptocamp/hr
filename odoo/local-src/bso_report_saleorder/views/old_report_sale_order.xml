<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_saleorder_bso"
              inherit_id="sale.report_saleorder">
        <xpath expr="//t[@t-foreach='docs']" position="replace">
            <t t-set="data_report_margin_top" t-value="45"/>
            <t t-set="data_report_header_spacing" t-value="40"/>
            <t t-call="report.external_layout">
                <t t-set="o" t-value="docs[0]"/>
                <t t-foreach="docs" t-as="quotation">
                    <div class="page">
                        <t t-call="bso_report_saleorder.saleorder_custom_report"/>
                    </div>
                </t>
            </t>
        </xpath>
    </template>

    <template id="saleorder_custom_report">
        <!--introduction-->
        <div id="introduction" class="page-header mt16">
            <h1>
                <t t-if="quotation.state in ('draft','sent','cancel')">Quotation
                </t>
                <t t-if="quotation.state not in ('draft','sent','cancel')">Order
                </t>
                <em t-esc="quotation.name"/>
                <small t-field="quotation.state"/>
            </h1>
        </div>
        <!-- Informations -->
        <div class="row mt32">
            <div class="col-md-6 col-xs-6">
                <div class="row">
                    <label class="col-sm-4 col-xs-4 text-right">Customer:
                    </label>
                    <div class="col-sm-8 col-xs-8">
                        <div t-field="quotation.partner_id"/>
                    </div>
                </div>
                <div class="row">
                    <label class="col-sm-4 col-xs-4 text-right">Bill To:
                    </label>
                    <div class="col-sm-8 col-xs-8">
                        <div t-field="quotation.partner_invoice_id" t-options='{
                          "widget": "contact",
                          "fields": ["address", "name", "phone", "email"]
                          }'/>
                    </div>
                </div>
                <div t-if="quotation.partner_shipping_id.id != quotation.partner_invoice_id.id"
                     class="row">
                    <label class="col-sm-4 col-xs-4 text-right">Ship To:
                    </label>
                    <div class="col-sm-8 col-xs-8">
                        <div t-field="quotation.partner_shipping_id"
                             t-options='{
                        "widget": "contact",
                        "fields": ["address", "name", "phone"]
                        }'/>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-xs-6">
                <div class="row">
                    <label class="col-sm-5 col-xs-5 text-right">Your Contact:
                    </label>
                    <div class="col-sm-7 col-xs-7">
                        <div t-field="quotation.user_id" t-options='{
                          "widget": "contact",
                          "fields": ["name", "phone", "email"]
                          }'/>
                    </div>
                </div>
                <div class="row">
                    <label class="col-sm-5 col-xs-5 text-right">Quote Date:
                    </label>
                    <div class="col-sm-7 col-xs-7">
                        <span t-field="quotation.date_order"/>
                    </div>
                    <div class="clearfix"/>
                    <div t-if="quotation.validity_date and quotation.state in ['draft', 'sent']">
                        <label class="col-sm-5 col-xs-5 text-right">Expiration
                            Date:
                        </label>
                        <div class="col-sm-7 col-xs-7">
                            <span t-field="quotation.validity_date"/>
                        </div>
                    </div>
                    <div class="clearfix"/>
                    <div t-if="quotation.client_order_ref">
                        <label class="col-sm-5 col-xs-5 text-right">Your
                            Reference:
                        </label>
                        <div class="col-sm-7 col-xs-7">
                            <span t-field="quotation.client_order_ref"/>
                        </div>
                    </div>
                    <div class="clearfix"/>
                    <div t-if="quotation.partner_id.ref">
                        <label class="col-sm-5 col-xs-5 text-right">Governing MSA:
                        </label>
                        <div class="col-sm-7 col-xs-7">
                            <span t-field="quotation.partner_id.ref"/>
                        </div>
                    </div>
                    <div class="clearfix"/>
                    <div t-if="quotation.duration">
                        <label class="col-sm-5 col-xs-5 text-right">Duration:
                        </label>
                        <div class="col-sm-7 col-xs-7">
                            <span t-field="quotation.duration"/>
                        </div>
                    </div>
                    <div class="clearfix"/>
                    <div t-if="quotation.payment_term_id">
                        <label class="col-sm-5 col-xs-5 text-right">Payment Terms:
                        </label>
                        <div class="col-sm-7 col-xs-7">
                            <span t-field="quotation.payment_term_id"/>
                        </div>
                    </div>
                    <div class="clearfix"/>
                    <div t-if="quotation.currency_id">
                        <label class="col-sm-5 col-xs-5 text-right">Currency:
                        </label>
                        <div class="col-sm-7 col-xs-7">
                            <span t-field="quotation.currency_id"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Contract details -->
        <!--<h1 class="page-header">Contract Details:</h1>
        <div class="row mt32">
            <div class="col-xs-6">
                <div t-if="quotation.partner_id.ref">
                    <strong>Governing MSA:</strong>
                    <span t-field="quotation.partner_id.ref"/>
                </div>
                <div t-if="quotation.client_order_ref">
                    <strong>Customer Reference:</strong>
                    <span t-field="quotation.client_order_ref"/>
                </div>
                <div t-if="quotation.duration">
                    <strong>Duration:</strong>
                    <span t-field="quotation.duration"/>
                    Months
                </div>
            </div>
            <div class="col-xs-6">
                <div name="payment_term"
                     t-if="quotation.payment_term_id">
                    <strong>Payment Terms:</strong>
                    <span t-field="quotation.payment_term_id"/>
                </div>
                <div name="currency"
                     t-if="quotation.currency_id">
                    <strong>Currency:</strong>
                    <span t-field="quotation.pricelist_id.currency_id"/>
                </div>
            </div>
        </div>-->
        <t t-call="website_quote.pricing"/>
        <!--Signatures-->
        <section id="signatures" style="page-break-inside: avoid;">
            <h1 class="page-header">Signatures:</h1>
            <div class="row">
                <div class="col-xs-6">
                    <h5>
                        <span t-field="quotation.partner_id"></span>
                    </h5>
                </div>
                <div class="col-xs-6">
                    <h5>BSO</h5>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-2">
                    <h5>Signature:</h5>
                    <h5>Printed name:</h5>
                    <h5>Date:</h5>
                    <h5>Title:</h5>
                </div>
                <div class="col-xs-4">
                    <hr></hr>
                    <hr></hr>
                    <hr></hr>
                    <hr></hr>
                </div>
                <div class="col-xs-2">
                    <h5>Signature:</h5>
                    <h5>Printed name:</h5>
                    <h5>Date:</h5>
                    <h5>Title:</h5>
                </div>
                <div class="col-xs-4">
                    <hr></hr>
                    <hr></hr>
                    <hr></hr>
                    <hr></hr>
                </div>
            </div>
        </section>
    </template>
</odoo>